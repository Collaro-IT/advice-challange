<!-- @format -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Card Design</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500&display=swap" rel="stylesheet" />
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link rel="stylesheet" href="./public/stylesheets/main.css" />
	
	
<script>
class JSONReader {
  constructor(jsonURL) {
    this.jsonURL = jsonURL;
  }

  async parseJSON() {
    try {
      // Fetch JSON data
      const response = await fetch(this.jsonURL);
      const jsonData = await response.json();

      // Process each item in JSON
      jsonData.forEach(item => {
        // Assuming your Card class is defined elsewhere
        const card = new Card(item);

        // Append card to the container
        $('.card-section').append(card.toHTML());
      });
    } catch (error) {
      console.error('Error fetching or parsing JSON:', error);
    }
  }
}


  class Card {
    constructor(item) {
	
      // Assuming your CSV has headers and data aligns with them
      this.data = item;
    }
	
	  // Gets the colour of the card, lower case
	  getColor() {
		const sector = this.data.sector.toLowerCase();
		
		switch (sector) {
		  case 'energy':
			return 'teal';
		  case 'agriculture':
			return 'green';
		  case 'manufacturing':
			return 'orange';
		  case 'built environment':
			return 'pink';
		  default:
			return 'teal'; // You can choose a default color or handle it as needed
		}
	  }
	  
	  // Get the Phase Icon
	  getPhaseIcon(){
	  
		console.log(this.data);
	  
		return this.getColor() + "/" + this.data.phaseTitle.replaceAll(" ","").replace("&","")  + '.svg' ;
	  
	  }
	  
	  // Get AI Icon 1
	  getAI1Icon(){
	  
		return this.getColor() + "/" + this.data.ai1.replaceAll(" ","").replace("&","") + '.svg' ;
	  
	  }
	  
	  // Get AI Icon 2
	  getAI2Icon(){
	  
		return this.getColor() + "/" + this.data.ai2.replaceAll(" ","").replace("&","") + '.svg'; 
	  
	  }

	  // Get AI Icon 3
	  getAI3Icon(){
	  
		return this.getColor() + "/" + this.data.ai3.replaceAll(" ","").replace("&","") + '.svg'; 
	  
	  }	 

	  getImg(){
	  
		return '/images/' + this.data.sector + '.svg'
	  
	  }
	  
	  // Hide Icon 1
	  hideIcon1() {
		return this.data.ai1 == '' ? true : false;
	  }

	  // Hide Icon 2
	  hideIcon2() {
		return this.data.ai2 == '' ? true : false;
	  }

	  // Hide Icon 3
	  hideIcon3() {
		return this.data.ai3 == '' ? true : false;
	  }
	  
	  // Hide GC
	  hideGC(){
		return this.data.challenge == '' ? true : false;
	  }
	  
	  
	starRating(n) {
		const fillStar = '<img src="./public/assets/Icons/fill-star.svg" alt="fill-star.svg" />';
		const emptyStar = '<img src="./public/assets/Icons/star.svg" alt="star.svg" />';

		switch (n) {
			case 1:
				return `${fillStar} ${emptyStar} ${emptyStar}`;
			case 2:
				return `${fillStar} ${fillStar} ${emptyStar}`;
			case 3:
				return `${fillStar} ${fillStar} ${fillStar}`;
			default:
				return '';
		}
	}

	  


    toHTML() {
    // Convert card data to HTML and return
    return `
      <div class="card card-${this.getColor()}-text-bg">
        <div class="card-content">
          <div class="card-side card-${this.getColor()}-bg">
            <div class="control-system card-${this.getColor()}-bg">
			  <div class="number">
				<h5 class="card-${this.getColor()}-text-bg">${this.data.number}</h5>
			  </div>
              <span>${this.data.title}</span>
            </div>
			${!this.hideGC() ? `
            <div class="gc card-${this.getColor()}-bg">
              <h5 class="card-${this.getColor()}-text-bg">${this.data.challenge}</h5>
			</div>` : ''}
            <div class="icon icon-1 card-${this.getColor()}-bg">
              <span><img src="./public/assets/Icons/${this.getPhaseIcon()}" /></span>
            </div>
		    ${!this.hideIcon1() ? `
		      <div class="icon icon-2 card-${this.getColor()}-bg">
			  <span><img src="./public/assets/Icons/${this.getAI1Icon()}" /></span>
		    </div>` : ''}
		    ${!this.hideIcon2() ? `
		      <div class="icon icon-3 card-${this.getColor()}-bg">
			  <span><img src="./public/assets/Icons/${this.getAI2Icon()}" /></span>
		    </div>` : ''}
		    ${!this.hideIcon3() ? `
		      <div class="icon icon-4 card-${this.getColor()}-bg">
			  <span><img src="./public/assets/Icons/${this.getAI3Icon()}" /></span>
		    </div>` : ''}
          </div>

          <div class="card-conent-img">
            <img src="./public/assets/${this.getImg()}" alt="" />
          </div>
          <div class="card-content-text card-${this.getColor()}-text-bg">
            <p>${this.data.description}</p>
            <div class="rating">
              <div class="rating-item card-${this.getColor()}-bg">
                <h6>Impact</h6>
                <div class="rating-icon">
                 ${this.starRating(this.data.Impact)}
                </div>
              </div>
              <div class="rating-item card-${this.getColor()}-bg">
                <h6>AI suitablity</h6>
                <div class="rating-icon">
                 ${this.starRating(this.data.AISuitability)}
                </div>
              </div>
              <div class="rating-item card-${this.getColor()}-bg">
                <h6>Novelty</h6>
                <div class="rating-icon">
                 ${this.starRating(this.data.Novelty)}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>			  
			  
    `;
  }
}

// Specify the URL of your JSON file
const jsonURL = 'data.json';

// Create an instance of JSONReader and parse the JSON
const jsonReader = new JSONReader(jsonURL);
jsonReader.parseJSON();
</script>
	
	
	
	
	
	
	
  </head>
  <body>
    <div class="card-section">
    </div>
  </body>
</html>
